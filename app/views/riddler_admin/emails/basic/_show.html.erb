<div class="row" style="margin-bottom: 32px;">
  <div class="col-sm">

    <ul id="email-tabs" class="nav nav-tabs">
      <li class="nav-item">
        <a class="nav-link active" id="edit-tab" data-toggle="tab" href="#edit" role="tab" aria-controls="edit" aria-selected="true">Edit</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="email-definition-tab" data-toggle="tab" href="#email-definition" role="tab" aria-controls="email-definition" aria-selected="false">Definition</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="email-preview-tab" data-toggle="tab" href="#email-preview" role="tab" aria-controls="email-preview" aria-selected="false">Preview</a>
      </li>
    </ul>

  </div>
</div>


<div class="tab-content" id="email-tabs-content">
  <div class="tab-pane fade show active" id="edit" role="tabpanel" aria-labelledby="edit-tab">
    <%= form_with model: @email do |form| %>
      <div class="form-row">
        <div class="form-group col">
          <%= form.label :subject %>
          <%= form.text_field :subject, class:"form-control" %>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col">
          <%= form.label :body %>
          <%= form.text_area :body, class:"form-control", rows: 12 %>
        </div>
        <div class="form-group col">
          <%= form.label :css, "CSS" %>
          <%= form.text_area :css, class:"form-control", rows: 12 %>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col">
          <%= form.submit "Save email", class: "btn btn-primary" %>
          <%= link_to "Cancel", emails_path, class: "btn btn-light" %>
        </div>
      </div>
    <% end %>
  </div>

  <div class="tab-pane fade" id="email-definition" role="tabpanel" aria-labelledby="definition-tab">
    <%= render partial: "definition", object: @email %>
  </div>

  <div class="tab-pane fade" id="email-preview" role="tabpanel" aria-labelledby="preview-tab">
    <%= render partial: "riddler_admin/preview_email", locals: { preview_contexts: @preview_contexts, email: @email } %>
  </div>
</div>
